<!-- Header / Navbar -->
<header class="fixed top-0 left-0 w-full z-50 bg-transparent">
  <nav class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4 text-white text-xs sm:text-sm font-semibold tracking-widest">

    <!-- Left Nav -->
    <ul class="flex space-x-6 uppercase">
      <li><a class="hover:underline" href="/">Home</a></li>
      <li><a class="hover:underline" href="/shop">Shop</a></li>
      <li><a class="hover:underline" href="/about">About</a></li>
      <li><a class="hover:underline" href="/contact">Contact</a></li>
    </ul>

    <!-- Right Nav: User + Cart -->
    <div class="flex items-center space-x-4 relative">

      <!-- Profile Icon (Dropdown) -->
      <div class="relative">
        <button id="profileBtn" class="focus:outline-none" title="Profile Menu">
          <i class="fas fa-user text-lg"></i>
        </button>

        <!-- Dropdown -->
    <div id="profileDropdown" class="absolute right-0 mt-2 w-44 bg-white text-black rounded-md shadow-md hidden z-50 py-2">
       <% if (typeof user !== 'undefined' && user) { %>
       <div class="px-4 py-2 border-b border-gray-200">
       <span class="block font-medium text-gray-800">Hello, <%= user.name.split(' ')[0] %></span>
  
    </div>
       <a href="/profile" class="block px-4 py-2 hover:bg-gray-100">Profile</a>
       <a href="/orders" class="block px-4 py-2 hover:bg-gray-100">Orders</a>
       <a href="/logout" class="block px-4 py-2 hover:bg-gray-100 text-red-500">Logout</a>
       <% } else { %>
       <a href="/signup" class="block px-4 py-2 hover:bg-gray-100">Sign Up</a>
       <a href="/login" class="block px-4 py-2 hover:bg-gray-100">Login</a>
       <a href="/orders" class="block px-4 py-2 hover:bg-gray-100">Orders</a>
       <% } %>
    </div>

      <!-- Cart Icon -->
      <a href="/cart" class="hover:underline relative" title="Shopping Cart">
        <i class="fas fa-shopping-bag text-lg"></i>
        <% if (typeof cartCount !== 'undefined' && cartCount > 0) { %>
          <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold"><%= cartCount %></span>
        <% } %>
      </a>
    </div>
  </nav>
</header>

<!-- Toggle Dropdown Script -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("profileBtn");
    const dropdown = document.getElementById("profileDropdown");

    btn.addEventListener("click", () => {
      dropdown.classList.toggle("hidden");
    });

    window.addEventListener("click", (e) => {
      if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add("hidden");
      }
    });
  });
</script>
