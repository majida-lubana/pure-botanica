<header class="fixed top-0 left-0 w-full z-50" style="background: linear-gradient(to right, #022b2e, #01232c);">
  <nav class="max-w-7xl mx-auto flex items-center justify-between px-6 py-4 text-white text-xs sm:text-sm font-semibold tracking-widest">
    <ul class="flex space-x-6 uppercase">
      <li><a class="hover:underline" href="/">Home</a></li>
      <li><a class="hover:underline" href="/shop">Shop</a></li>
      <li><a class="hover:underline" href="/about">About</a></li>
      <li><a class="hover:underline" href="/contact">Contact</a></li>
    </ul>

    <div class="flex items-center space-x-4 relative">
      <div class="relative">
        <button id="profileBtn" class="focus:outline-none" title="Profile Menu">
          <i class="fas fa-user text-lg"></i>
        </button>

        <div id="profileDropdown" class="absolute right-0 mt-2 w-44 bg-white text-black rounded-md shadow-md hidden z-50 py-2">
          <% if (typeof user !== 'undefined' && user) { %>
            <div class="px-4 py-2 border-b border-gray-200">
              <span class="block font-medium text-gray-800">Hello, <%= user.name %></span>
            </div>
            <a href="/orders" class="block px-4 py-2 hover:bg-gray-100">profile</a>
            <a href="/logout" class="block px-4 py-2 hover:bg-gray-100 text-red-500">Logout</a>
          <% } else { %>
            <a href="/signup" class="block px-4 py-2 hover:bg-gray-100">Sign Up</a>
            <a href="/login" class="block px-4 py-2 hover:bg-gray-100">Login</a>
            <a href="/orders" class="block px-4 py-2 hover:bg-gray-100">profile</a>

          <% } %>
        </div>
      </div>

      <a href="/wishlist" class="hover:underline relative" title="Wishlist">
        <i class="fas fa-heart text-lg"></i>
        <% if (typeof wishlistCount !== 'undefined' && wishlistCount > 0) { %>
          <span class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold"><%= wishlistCount %></span>
        <% } %>
      </a>

      <a href="/cart" class="hover:underline relative" title="Shopping Cart">
  <i class="fas fa-shopping-bag text-lg"></i>
 <span id="cart-count-badge" 
      class="absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold 
      <%= (typeof cartCount !== 'undefined' && cartCount > 0) ? '' : 'hidden' %>">
  <%= typeof cartCount !== 'undefined' ? cartCount : '' %>
</span>
</a>
    </div>
  </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("profileBtn");
    const dropdown = document.getElementById("profileDropdown");

    btn.addEventListener("click", () => {
      dropdown.classList.toggle("hidden");
    });

    window.addEventListener("click", (e) => {
      if (!btn.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.classList.add("hidden");
      }
    });
  });


  const updateCartBadge = (count) => {
  const badge = document.getElementById('cart-count-badge');
  if (!badge) return;

  if (count > 0) {
    badge.textContent = count;
    badge.classList.remove('hidden');
  } else {
    badge.classList.add('hidden');
  }
};
</script>